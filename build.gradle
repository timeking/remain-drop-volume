group = "org.javaee.sample"
version = "1.0-SNAPSHOT"

apply plugin: "war"

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
    jcenter()
}

dependencies {
    compile group: "org.apache.commons", name: "commons-lang3", version: "3.5"
    compileOnly group: "org.projectlombok", name: "lombok", version: "1.16.16"

    providedCompile group: "javax", name: "javaee-api", version: "7.0"

    testCompile group: "junit", name: "junit", version: "4.12"
}

task wrapper(type: Wrapper) {
    gradleVersion = "3.5"
    //distributionType = DistributionType.ALL
}

task copyDockerfile(type: Copy) {
    from "src/main/docker"
    into "build/docker"
    expand(project.properties)
    filteringCharset = "UTF-8"
}

task copyWar(type: Copy) {
    dependsOn copyDockerfile
    from "build/libs"
    into "build/docker"
    rename "${project.name}-${project.version}.war", "${project.name}.war"
}

build.dependsOn copyWar